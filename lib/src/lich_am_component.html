<!-- Components info: https://webdev.dartlang.org/components -->
<header class="material-header">
    <div class="material-header-row">

        <material-button style="visibility: hidden" icon>
            <material-icon icon="menu"></material-icon>
        </material-button>

        <div *ngIf="monthYearFormat != null" class="material-spacer" style="text-align: center">
            <material-button style="vertical-align: middle;" icon (trigger)="onBefore()">
                <material-icon icon="navigate_before"></material-icon>
            </material-button>

            <span style="vertical-align: middle; font-size: 20px; margin: 8px">
                {{singleDateModel.selection('range').start.format(monthYearFormat).toUpperCase()}}
            </span>

            <material-button style="vertical-align: middle;" icon (trigger)="onNext()">
                <material-icon icon="navigate_next"></material-icon>
            </material-button>
        </div>

        <material-button icon (trigger)="showDialog = true" [disabled]="showDialog">
            <material-icon icon="search"></material-icon>
        </material-button>
    </div>
</header>

<material-content style="position: absolute;  width: 100%; bottom: 0">
    
    <div style="height: 93.75%; width: 100%; position: absolute;">
    
            <div style="width: 100%; height: 40%; position: absolute;">
                <b style="font-size: 160px; 
                    margin: 0; 
                    position: absolute; 
                    top: 50%;
                    left: 50%;
                    -ms-transform: translate(-50%, -50%);
                    transform: translate(-50%, -50%);">
                    {{singleDateModel.selection('range').start.day}}
                </b>
            </div>
    
            <div style="width: 100%; height: 10%; position: absolute; left: 0; top: 40%; text-align: center;">
                <p *ngIf="weekFormat != null" style="font-size: 24px; margin: 0">
                    {{singleDateModel.selection('range').start.format(weekFormat)}}
                </p>
            </div>
    
            <div style="width: 100%; height: 8px; position: absolute; left: 0; top:50%; background: gray"></div>
    
            <div style="width: 100%;
                height: 50%;
                display: -webkit-flex;
                display: flex;
                -webkit-flex-direction: row;
                -ms-flex-direction: row;
                flex-direction: row;
                position: absolute;
                left: 0;
                top: 50%">
    
                <div style="-webkit-flex: 3 3;
                    -moz-flex: 3 3;
                    -ms-flex: 3 3;
                    -o-flex: 3 3;
                    flex: 3 3;
                    text-align: right;;
                    display: -webkit-flex;
                    display: flex;
                    -webkit-flex-direction: column;
                    -ms-flex-direction: column;
                    flex-direction: column;
                    -webkit-justify-content: center;
                    -ms-flex-pack: center;
                    justify-content: center;">
                    <p>Ngày {{canChiDay}}</p>
                    <p>Tháng {{canChiMonth}}</p>
                    <p>Năm {{canChiYear}}</p>
                </div>
    
                <div style="height: 100%;
                    -webkit-flex: 4 4;
                    -moz-flex: 4 4;
                    -ms-flex: 4 4;
                    -o-flex: 4 4;
                    flex: 4 4;
                    text-align: center;
                    display: -webkit-flex;
                    display: flex;
                    -webkit-flex-direction: column;
                    -ms-flex-direction: column;
                    flex-direction: column;
                    -webkit-justify-content: center;
                    -ms-flex-pack: center;
                    justify-content: center;">
                    <div style="position: absolute; 
                        top: 50%;
                        left: 50%;
                        -ms-transform: translate(-50%, -50%);
                        transform: translate(-50%, -50%);">

                        <p style="font-size: 24px; margin-top: 16px; margin-bottom: 8px">{{lunarMonth}}</p>
                        
                        <p style="font-size: 64px; margin-top: 8px; margin-bottom: 8px"><b>{{lunarDay}}</b></p>
                        
                        <p style="font-size: 24px; margin-top: 8px; margin-bottom: 8px">Năm {{lunarYear}}</p>
                    </div>
                </div>
    
                <div style="-webkit-flex: 1 1;
                    -moz-flex: 3 3;
                    -ms-flex: 3 3;
                    -o-flex: 3 3;
                    flex: 3 3;
                    text-align: left;
                    display: -webkit-flex;
                    display: flex;
                    -webkit-flex-direction: column;
                    -ms-flex-direction: column;
                    flex-direction: column;
                    -webkit-justify-content: center;
                    -ms-flex-pack: center;
                    justify-content: center;
                    white-space: pre-line;">
                    <p>Giờ Hoàng Đạo:<br/>{{dHour}}</p>
                </div>
            </div>
        </div>
    
    <div style="height: 6.25%; position: absolute; right: 0; bottom: 0">

        <material-button onclick="window.open('https\:\/\/calendar.google.com\/calendar\/r?cid=demen.org_4jc7p02lkoire319rabglmfifo@group.calendar.google.com')">
            <i class="fa fa-calendar-plus-o"></i>
        </material-button>

        <material-button onclick="window.open('https\:\/\/calendar.google.com\/calendar\/ical\/demen.org_4jc7p02lkoire319rabglmfifo%40group.calendar.google.com\/public\/basic.ics')">
            <i class="fa fa-download"></i>
        </material-button>

        <material-button onclick="window.open('https\:\/\/github.com\/de-men\/amlich')">
            <i class="fa fa-github"></i>
        </material-button>
    </div>
</material-content>

<modal [(visible)]="showDialog">
    <material-dialog class="dialog">
    
        <h1 header>Chọn ngày</h1>
    
        <div>
    
            <div *ngIf="ddMMyyyyFormat != null">

                <div>Ngày/Tháng/Năm</div>

                <material-input dateParsing
                                [(dateFormat)]="ddMMyyyyFormat"
                                [date]="singleDateModel.selection('range').start"
                                (dateChange)="onDateChange($event)"
                                [required]="true">
                </material-input>
    
                <material-button icon (trigger)="onRefresh()">
                    <material-icon icon="today"></material-icon>
                </material-button>
            </div>


        </div>
    
        <div footer>
        <material-button autoFocus clear-size (trigger)="showDialog = false">
            OK
        </material-button>
        </div>
    
    </material-dialog>
</modal>
